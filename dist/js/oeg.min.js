function Card(){this.cardHead=$("div.card-head"),this.init()}function letterFormat(t){return t.replace(/\s*/g,"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}function Navbar(){this.navbar=$("#navbar"),this.navs=this.navbar.find("a.nav-link"),this.init()}var thisPagination,thisRouter,thisSearchBar,thisSidebar,thisToTop;function Pagination(){(thisPagination=this).list=$("#article-list"),this.pagination=$("ul.pagination"),this.pages=this.pagination.find("li.pages"),this.prev=this.pagination.find("li:first"),this.next=this.pagination.find("li:last"),this.init()}function Router(){(thisRouter=this).sidebar=$("div.sidebar"),this.items=this.sidebar.find("a.list-group-item[url]"),this.pagination=$("ul.pagination"),this.pages=this.pagination.find("li.pages"),this.pagesLink=this.pages.find("a"),this.prev=this.pagination.find("li:first"),this.prevLink=this.prev.find("a"),this.next=this.pagination.find("li:last"),this.nextLink=this.next.find("a"),this.init()}function SearchBar(){(thisSearchBar=this).search=$(".search"),this.searchInput=$(".search input"),this.navs=$(".navbar-nav"),this.init()}function Sidebar(){(thisSidebar=this).sidebar=$("div.sidebar"),this.items=this.sidebar.find("a.list-group-item[url]"),this.title=$("h1"),this.breadcrumbs=$("#breadcrumb li.breadcrumb-item"),this.list=$("#article-list"),this.init()}function ToTop(){(thisToTop=this).toTop=$("#totop"),this.init()}Card.prototype={constructor:Card,init:function(){this.cardHead.hover(this.mouseIn,this.mouseOut)},mouseIn:function(){$(this).find(".mask").slideDown(200)},mouseOut:function(){$(this).find(".mask").stop().slideUp(200)}},$(document).ready(function(){new Navbar,new Card,new SearchBar,new Sidebar,new ToTop,new Router}),Navbar.prototype={constructor:Navbar,init:function(){this.addActive()},addActive:function(){for(var t=window.location.href,i=[],a=0;a<this.navs.length;a++)if(i[a]=letterFormat(this.navs.eq(a).text()),t.replace(/-/g,"").includes(i[a])){this.navbar.find(".nav-item").eq(a).addClass("active");break}}},Pagination.prototype={constructor:Pagination,init:function(){this.pages.click(this.turnPage),this.prev.click(this.prevPage),this.next.click(this.nextPage)},turnPage:function(t){t&&t.preventDefault(),thisPagination.setActivePage($(this).find("a").attr("url")),thisPagination.addList($(this).find("a").attr("url"))},prevPage:function(t){t&&t.preventDefault();var i,a=thisPagination.pages.filter(".active");a.prev().text().includes("Previous")?alert("Ya es la primera página"):(i=a.prev().find("a").attr("url"),thisPagination.setActivePage(i),thisPagination.addList(i))},nextPage:function(t){t&&t.preventDefault();var i,a=thisPagination.pages.filter(".active");a.next().text().includes("Next")?alert("Ya es la última página"):(i=a.next().find("a").attr("url"),thisPagination.setActivePage(i),thisPagination.addList(i))},setActivePage:function(t){thisPagination.pages.removeClass("active"),thisPagination.pages.find("a").filter('[url="'+t+'"]').parent().addClass("active")},addList:function(t){this.list.empty();$.ajax(t).done(function(t){for(var i=JSON.parse(t),a=0;a<i.length-1;a++)thisSidebar.list.append('<div class="card mb-4 ml-auto px-0" property="itemListElement" typeof="Article"><div class="card-body"><h2 class="card-title" property="headline"><a href="#" property="url">title</a></h2><div class="row mb-3"><div class="col-lg-4 col-sm-12"><div class="card-head"><a href="#" property="image" resource="#"><img class="card-img-top" src="#" alt="videojuegos"></a><div class="mask"><div class="middle-text h3">Leer</div></div></div></div><div class="col-lg-8 col-sm-12"><p class="card-text">intro</p></div></div><a href="#" class="btn btn-primary" property="mainEntityOfPage">Leer más &rarr;</a></div><div class="card-footer text-muted"><span property="datePublished" content="2019-01-01">date</span><span property="author" resource="#OEG"><a href="../index.html">OEG</a></span><meta property="dateModified" content="2019-01-01"><meta property="publisher" resource="#OEG"></div></div>'),thisSidebar.articles=thisSidebar.list.find("div.card"),thisSidebar.articles.eq(a).find("h2 a").text(i[a+1].title),thisSidebar.articles.eq(a).find("p.card-text").html(i[a+1].intro),thisSidebar.articles.eq(a).find("a[property=image]").attr("resource",i[a+1].img),thisSidebar.articles.eq(a).find("img").attr("src",i[a+1].img),thisSidebar.articles.eq(a).find("img").attr("alt",i[a+1].alternate),thisSidebar.articles.eq(a).find('span[property="datePublished"]').text(i[a+1].date),thisSidebar.articles.eq(a).find("a[href]").attr("href",i[a+1].href);new Card}).fail(function(){alert("ERROR")})}},Router.prototype={constructor:Router,init:function(){window.addEventListener("popstate",this.listenPopstate),this.items.off("click",this.pushState),this.items.click(this.pushState),this.pagesLink.click(this.pushState),this.prevLink.click(this.pushState),this.nextLink.click(this.pushState)},listenPopstate:function(t){var i,a=(t.state||{}).path||"";""==a?window.location.reload():1==a.slice(-1)?(i=thisRouter.items.filter('a[href="'+a+'"]'),Sidebar.prototype.changePage.call(i)):(i=thisRouter.pagesLink.filter('a[href="'+a+'"]').parent(),Pagination.prototype.turnPage.call(i))},pushState:function(t){var i=thisRouter.pages.filter(".active"),a=$(this).text().includes("Previous")&&i.prev()!=$(this)?i.prev().find("a").attr("href"):$(this).text().includes("Next")&&i.next()!=$(this)?i.next().find("a").attr("href"):$(this).attr("href");history.pushState({path:a},null,a)}},SearchBar.prototype={constructor:SearchBar,init:function(){this.searchInput.focus(this.focus),this.searchInput.blur(this.unfocus)},focus:function(){thisSearchBar.navs.css("display","none"),thisSearchBar.search.animate({width:"75%"},500)},unfocus:function(){setTimeout(function(){thisSearchBar.navs.css("display","flex")},500),thisSearchBar.search.animate({width:"130px"},500)}},Sidebar.prototype={constructor:Sidebar,init:function(){this.items.click(this.changePage)},changePage:function(t){t&&t.preventDefault(),thisSidebar.title.text($(this).text()),thisSidebar.changeBreadcrumbs($(this).text()),thisSidebar.items.removeClass("active"),$(this).addClass("active"),thisSidebar.addList($(this).attr("url")),thisSidebar.addPagination($(this).attr("href"),$(this).attr("url"))},changeBreadcrumbs:function(t){var i,a,e=this.breadcrumbs.filter(".active"),s=e.clone(),r="/"+letterFormat(s.text())+".html";s.text()===this.items.filter(".active").text()?e.removeClass("active").after(s).remove():e.removeClass("active").after(s).find("a").attr("href",r),this.breadcrumbs=$("#breadcrumb li.breadcrumb-item"),i=this.breadcrumbs.length,(a=this.breadcrumbs.filter(".active")).find("meta").attr("content",i),a.find("span").text(t)},addList:function(t){this.list.empty();$.ajax(t).done(function(t){for(var i=JSON.parse(t),a=0;a<i.length-1;a++)thisSidebar.list.append('<div class="card mb-4 ml-auto px-0" property="itemListElement" typeof="Article"><div class="card-body"><h2 class="card-title" property="headline"><a href="#" property="url">title</a></h2><div class="row mb-3"><div class="col-lg-4 col-sm-12"><div class="card-head"><a href="#" property="image" resource="#"><img class="card-img-top" src="#" alt="videojuegos"></a><div class="mask"><div class="middle-text h3">Leer</div></div></div></div><div class="col-lg-8 col-sm-12"><p class="card-text">intro</p></div></div><a href="#" class="btn btn-primary" property="mainEntityOfPage">Leer más &rarr;</a></div><div class="card-footer text-muted"><span property="datePublished" content="2019-01-01">date</span><span property="author" resource="#OEG"><a href="../index.html">OEG</a></span><meta property="dateModified" content="2019-01-01"><meta property="publisher" resource="#OEG"></div></div>'),thisSidebar.articles=thisSidebar.list.find("div.card"),thisSidebar.articles.eq(a).find("h2 a").text(i[a+1].title),thisSidebar.articles.eq(a).find("p.card-text").html(i[a+1].intro),thisSidebar.articles.eq(a).find("a[property=image]").attr("resource",i[a+1].img),thisSidebar.articles.eq(a).find("img").attr("src",i[a+1].img),thisSidebar.articles.eq(a).find("img").attr("alt",i[a+1].alternate),thisSidebar.articles.eq(a).find('span[property="datePublished"]').text(i[a+1].date),thisSidebar.articles.eq(a).find("a[href]").attr("href",i[a+1].href);new Card}).fail(function(){alert("ERROR")})},addPagination:function(a,e){a=a.slice(0,-1);$("ul.pagination").remove(),this.list.after('<ul class="pagination justify-content-center"> <li class="page-item"> <a class="page-link" href="" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> <span class="sr-only">Previous</span> </a> </li> <li class="page-item"> <a class="page-link" href="" aria-label="Next"> <span aria-hidden="true">&raquo;</span> <span class="sr-only">Next</span> </a> </li> </ul>'),$.ajax(e).done(function(t){for(var i=JSON.parse(t)[0];0<i;i--)e=e.split("=")[0]+"="+i,$("ul.pagination li:nth-child(1)").after('<li class="page-item pages"> <a class="page-link">1</a> </li>'),$("ul.pagination li:nth-child(2) a").attr("url",e).text(i),$("ul.pagination li:nth-child(2) a").attr("href",a+i);$("ul.pagination li:nth-child(2)").addClass("active"),new Pagination,new Router}).fail(function(){alert("ERROR")})}},ToTop.prototype={constructor:ToTop,init:function(){$(window).scroll(this.trigger),this.toTop.click(this.backToTop)},trigger:function(){100<$(window).scrollTop()?thisToTop.toTop.fadeIn():thisToTop.toTop.fadeOut()},backToTop:function(){$("html, body").animate({scrollTop:0})}};